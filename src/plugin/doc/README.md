# 网易七鱼访客端SDK插件

## 概述

网易七鱼微信小程序访客端SDK插件是一个微信小程序端客服系统访客解决方案，既包含了客服聊天逻辑管理，也提供了聊天界面，开发者可方便的将客服功能集成到自己的 微信小程序 中。

## 接入说明

参考微信小程序插件的使用方式，七鱼提供的微信小程序插件名称为    QIYUSDK

### 初始化企业appKey

配置企业的appKey采用接口插件对外接口的形式，使用requirePlugin引用插件后调用 _$configAppKey(appKey) 方法。

## CRM对接

### 上报用户信息

七鱼 SDK 允许 App 的用户以匿名方式向客户咨询，但如果希望客服知道咨询的用户的身份信息，可以通过插件提供的 _$setUserInfo 接口告诉给客服。 该接口包含两个功能：

> 关联用户账户。调用过该接口后，客服即可知道当前用户是谁，并可以调看该用户之前发生过的访问记录。通过该接口，SDK还会把 App 端相同用户 ID 的咨询记录整合在一起。如果调用 _$setUserInfo(userInfo) 接口前是匿名状态，那么匿名状态下的聊天记录也会被整合到新设置的这个用户下面。

> 提供用户的详细资料。通过设置参数 userInfo 的 data 字段，小程序 能把用户的详细信息告诉给客服，这些信息会显示在客服会话窗口的用户信息栏中。

### 用户注销

如果一个有名用户需要清除用户信息，需要手动调用 _$logout 方法。
